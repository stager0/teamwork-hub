{% extends 'layouts/base-presentation.html' %}

{% block title %}Project Details: {{ project.title }}{% endblock %}

{% block content %}
  <div class="container mt-5 mb-5 pt-7">

    <div class="row mb-4 align-items-center">
      <div class="col">
        <h1>Project Details: "{{ project.title }}"</h1>
      </div>
      <div class="col-auto">
        <a href="{% url 'workspace:projects-list-update' project.id %}" class="btn btn-primary btn-sm me-1">Edit Project</a>
        <a href="{% url 'workspace:projects-list-delete' project.id %}" class="btn btn-danger btn-sm">Delete Project</a>
      </div>
    </div>

    <hr>

    <div class="card">
      <div class="card-header">
        <h4 class="mb-0">Project Information</h4>
      </div>
      <div class="card-body">

        <p><strong>Title:</strong> {{ project.title }}</p>

        {% if project.description %}
          <p><strong>Description:</strong> {{ project.description|safe }}</p>
        {% endif %}

        <hr>

        <p><strong>Start Date:</strong> {% if project.start_date %}{{ project.start_date }}{% else %}Not set{% endif %}</p>

        <p><strong>Command:</strong> {% if project.command %}{{ project.command.name }}{% else %}Not assigned{% endif %}</p>

        <p><strong>End Date:</strong> {% if project.end_date %}{{ project.end_date }}{% else %}Not set{% endif %}</p>

      </div>
    </div>

    <div class="card mt-4">
        <div class="card-header">
            <h4 class="mb-0">Tasks in this Project</h4>
        </div>
        <div class="card-body">

            {% if project.tasks.exists %}
                <p>View all <a href="{% url 'workspace:project-tasks-list' project.id %}">tasks for this project</a>.</p>
                 {% comment %}
                 <h5 class="mt-4">Recent Tasks:</h5>
                 <ul>
                   {% for task in project.tasks.all|slice:":5" %}
                     <li><a href="{% url 'workspace:task-detail' task.id %}">{{ task.title }}</a> (Status: {{ task.status }})</li>
                   {% endfor %}
                 </ul>
                 {% endcomment %}
            {% else %}
                <p>No tasks assigned to this project yet.</p>
            {% endif %}

            {% comment %}
            {% include 'workspace/task_list_table.html' with tasks=project.tasks.all project=project %}
            {% endcomment %}

             {% comment %}
             <h5 class="mb-3">Tasks:</h5>
             {% if project.tasks.all %}
                <ul class="list-group">
                {% for task in project.tasks.all %}
                   <li class="list-group-item d-flex justify-content-between align-items-center">
                     <a href="{% url 'workspace:task-detail' task.id %}">{{ task.title }}</a>
                     <span class="badge bg-primary rounded-pill">{{ task.status }}</span>
                   </li>
                {% endfor %}
                </ul>
             {% else %}
                <p>No tasks assigned to this project yet.</p>
             {% endif %}
             {% endcomment %}

        </div>
    </div>


  </div>
{% endblock content %}